### Customer Support Ticket System - Sample API Requests
### Use with VS Code REST Client extension, curl, or similar tools

@baseUrl = http://localhost:8000

### Health Check
GET {{baseUrl}}/health

### Root endpoint
GET {{baseUrl}}/

### --------------------------------------------
### TICKET CRUD OPERATIONS (note: use `subject` field, IDs are UUIDs)
### --------------------------------------------

### Create a new ticket
POST {{baseUrl}}/tickets
Content-Type: application/json

{
  "subject": "Cannot access my account after password reset",
  "description": "I tried to reset my password but now I cannot log in at all. The error message says my account is locked. This is critical for my work.",
  "customer_email": "customer@example.com",
  "category": "account_access",
  "priority": "high",
  "metadata": { "source": "web_form" }
}

### Get all tickets
GET {{baseUrl}}/tickets

### Get tickets filtered by category
GET {{baseUrl}}/tickets?category=account_access

### Get tickets filtered by priority
GET {{baseUrl}}/tickets?priority=high

### Get tickets filtered by status
GET {{baseUrl}}/tickets?status=new

### Get tickets with multiple filters
GET {{baseUrl}}/tickets?category=account_access&priority=high&status=new

### Get single ticket by ID (replace with actual UUID returned on create)
GET {{baseUrl}}/tickets/{{ticket_uuid}}

### Update a ticket
PATCH {{baseUrl}}/tickets/{{ticket_uuid}}
Content-Type: application/json

{
  "status": "in_progress",
  "priority": "urgent"
}

### Delete a ticket
DELETE {{baseUrl}}/tickets/{{ticket_uuid}}

### Get ticket statistics
GET {{baseUrl}}/tickets/stats

### --------------------------------------------
### BULK IMPORT OPERATIONS (use curl or REST client file upload)
### --------------------------------------------

### Import from CSV (curl example)
### Replace the path to the CSV file as needed
curl -X POST "{{baseUrl}}/import/csv" -F "file=@../fixtures/sample_tickets.csv"

### Import from JSON (curl example)
curl -X POST "{{baseUrl}}/import/json" -F "file=@../fixtures/sample_tickets.json"

### If using the VS Code REST Client, attach files using the extension's file upload syntax

### --------------------------------------------
### CLASSIFICATION OPERATIONS
### --------------------------------------------

### Classify a single ticket (auto-classify endpoint may be named `/tickets/{id}/auto-classify`)
POST {{baseUrl}}/tickets/{{ticket_uuid}}/auto-classify

### Auto-classify all tickets
POST {{baseUrl}}/tickets/classify-all

### Notes / Verification checklist:
- Use `subject` (not `title`) to match the ticket model used in code.
- IDs are UUIDs; do not assume integer IDs like `1`â€”replace `{{ticket_uuid}}` with the created ticket's `id`.
- Import endpoints expect a multipart file upload; curl examples above are reliable across platforms.
- If your routes differ (e.g., `/tickets/:id/classify` vs `/tickets/:id/auto-classify`), adapt the endpoints here to match `src/routes`.

